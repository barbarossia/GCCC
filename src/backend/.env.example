# ====================================
# GCCC 后端服务环境变量配置
# ====================================
# 复制此文件为 .env 并修改相应的值

# ====================================
# 服务器配置
# ====================================
NODE_ENV=development
PORT=3000
HOST=localhost

# ====================================
# 数据库配置 (PostgreSQL)
# ====================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=gccc_db
DB_USER=postgres
DB_PASSWORD=your_database_password
DB_SSL=false
DB_MAX_CONNECTIONS=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# ====================================
# Redis配置 (缓存和会话)
# ====================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CLUSTER_MODE=false
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000

# ====================================
# JWT认证配置
# ====================================
JWT_SECRET=your_super_secret_jwt_key_minimum_32_characters_long
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your_refresh_token_secret_different_from_jwt_secret
JWT_REFRESH_EXPIRES_IN=30d
JWT_ISSUER=gccc-backend
JWT_AUDIENCE=gccc-users

# ====================================
# Solana区块链配置
# ====================================
SOLANA_RPC_URL=https://api.devnet.solana.com
SOLANA_NETWORK=devnet
SOLANA_COMMITMENT=confirmed
GCCC_TOKEN_MINT=your_gccc_token_mint_address_here
STAKING_PROGRAM_ID=your_staking_program_id_here
NFT_COLLECTION_ID=your_nft_collection_id_here
TREASURY_WALLET=your_treasury_wallet_address_here

# ====================================
# API配置
# ====================================
API_VERSION=v1
API_PREFIX=/api
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,https://gccc.com
MAX_REQUEST_SIZE=10mb
MAX_FILE_SIZE=5mb

# ====================================
# 安全配置
# ====================================
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
SLOW_DOWN_DELAY_AFTER=50
SLOW_DOWN_DELAY_MS=500
SESSION_SECRET=your_session_secret_key_here
HELMET_CSP_DIRECTIVES=default-src 'self'

# ====================================
# 邮件服务配置 (可选)
# ====================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_specific_password
EMAIL_FROM=noreply@gccc.com
EMAIL_FROM_NAME=GCCC Platform

# ====================================
# IPFS存储配置 (可选)
# ====================================
IPFS_GATEWAY=https://ipfs.io/ipfs/
IPFS_API_URL=https://api.pinata.cloud
PINATA_API_KEY=your_pinata_api_key
PINATA_SECRET_KEY=your_pinata_secret_key
IPFS_TIMEOUT=30000

# ====================================
# 日志配置
# ====================================
LOG_LEVEL=info
LOG_FILE=logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5
LOG_DATE_PATTERN=YYYY-MM-DD
LOG_FORMAT=json
LOG_COLORIZE=true

# ====================================
# 监控和健康检查
# ====================================
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=5000
METRICS_ENABLED=true
METRICS_PATH=/metrics

# ====================================
# Sentry错误监控 (可选)
# ====================================
SENTRY_DSN=your_sentry_dsn_here
SENTRY_ENVIRONMENT=development
SENTRY_SAMPLE_RATE=1.0
SENTRY_TRACES_SAMPLE_RATE=0.1

# ====================================
# 缓存配置
# ====================================
CACHE_TTL_DEFAULT=3600
CACHE_TTL_USER_PROFILE=1800
CACHE_TTL_PROPOSALS=600
CACHE_TTL_STAKING_INFO=300
CACHE_TTL_TOKEN_PRICE=60

# ====================================
# 文件上传配置
# ====================================
UPLOAD_DIR=uploads
UPLOAD_MAX_SIZE=5242880
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,image/webp
UPLOAD_TEMP_DIR=temp

# ====================================
# 任务调度配置
# ====================================
CRON_ENABLED=true
CRON_STAKING_REWARDS=0 0 * * *
CRON_LOTTERY_DRAW=0 12 * * 0
CRON_DATA_CLEANUP=0 2 * * *
CRON_SYNC_BLOCKCHAIN=*/5 * * * *

# ====================================
# 第三方服务配置
# ====================================
# CoinGecko API (价格数据)
COINGECKO_API_KEY=your_coingecko_api_key
COINGECKO_BASE_URL=https://api.coingecko.com/api/v3

# Discord Webhook (通知)
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your_webhook_url

# Telegram Bot (通知)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_telegram_chat_id

# ====================================
# 开发和调试配置
# ====================================
DEBUG=gccc:*
DEBUG_SQL=false
DEBUG_REDIS=false
DEBUG_BLOCKCHAIN=false
MOCK_BLOCKCHAIN=false
MOCK_EMAIL=true

# ====================================
# 性能配置
# ====================================
CLUSTER_MODE=false
CLUSTER_WORKERS=auto
GRACEFUL_SHUTDOWN_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=65000
HEADERS_TIMEOUT=66000

# ====================================
# SSL/TLS配置 (生产环境)
# ====================================
SSL_ENABLED=false
SSL_CERT_PATH=/path/to/cert.pem
SSL_KEY_PATH=/path/to/key.pem
SSL_CA_PATH=/path/to/ca.pem

# ====================================
# 备份和恢复配置
# ====================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your_s3_bucket_name
BACKUP_S3_REGION=us-east-1

# ====================================
# 特性开关
# ====================================
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=false
FEATURE_TWO_FACTOR_AUTH=false
FEATURE_ADMIN_PANEL=true
FEATURE_ANALYTICS=true
FEATURE_RATE_LIMITING=true
FEATURE_CORS=true
FEATURE_COMPRESSION=true

# ====================================
# 业务逻辑配置
# ====================================
# 用户系统
USER_MAX_DEVICES=5
USER_INACTIVE_DAYS=90
USER_MAX_LOGIN_ATTEMPTS=5
USER_LOCKOUT_DURATION=900000

# 积分系统
POINTS_DAILY_CHECKIN=10
POINTS_REFERRAL_BONUS=100
POINTS_PROPOSAL_CREATE=50
POINTS_VOTE_CAST=5

# 质押系统
STAKING_MIN_AMOUNT=100
STAKING_MAX_AMOUNT=1000000
STAKING_LOCK_PERIODS=7,30,90,365
STAKING_APY_RATES=5,8,12,20

# 抽奖系统
LOTTERY_TICKET_PRICE=10
LOTTERY_MAX_TICKETS_PER_USER=100
LOTTERY_DRAW_INTERVAL=7

# NFT系统
NFT_MINT_PRICE=0.1
NFT_MAX_SUPPLY=10000
NFT_ROYALTY_PERCENTAGE=2.5

# ====================================
# 部署配置
# ====================================
DEPLOY_ENV=development
DEPLOY_VERSION=1.0.0
DEPLOY_BUILD_NUMBER=
DEPLOY_COMMIT_HASH=
DEPLOY_TIMESTAMP=

# ====================================
# 示例值说明
# ====================================
# JWT_SECRET: 至少32个字符的随机字符串，用于签名JWT token
# SOLANA_RPC_URL: Solana网络RPC端点
#   - Devnet: https://api.devnet.solana.com
#   - Testnet: https://api.testnet.solana.com  
#   - Mainnet: https://api.mainnet-beta.solana.com
# BCRYPT_ROUNDS: 密码哈希轮数，推荐10-12
# RATE_LIMIT_WINDOW_MS: 频率限制时间窗口（毫秒）
# CORS_ORIGIN: 允许的跨域来源，多个用逗号分隔
